<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tema 2: Entorno y Jest</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Space Grotesk', sans-serif; }
        .bg-dots { background-image: radial-gradient(#cbd5e1 2px, transparent 2px); background-size: 24px 24px; }
        .code-font { font-family: 'Consolas', 'Monaco', monospace; }
    </style>
</head>
<body class="bg-slate-50 bg-dots p-4 md:p-8">

    <div class="max-w-5xl mx-auto space-y-10">

        <!-- HEADER -->
        <header class="bg-gradient-to-r from-emerald-600 to-teal-600 rounded-3xl p-8 text-white shadow-xl relative overflow-hidden">
            <div class="absolute top-0 right-0 p-4 opacity-10 text-9xl">‚öôÔ∏è</div>
            <div class="relative z-10">
                <span class="bg-emerald-800 text-emerald-200 px-3 py-1 rounded-full text-xs font-bold tracking-widest uppercase">Tema 02</span>
                <h1 class="text-4xl md:text-5xl font-bold mt-2">EL ENTORNO DE PRUEBAS</h1>
                <p class="text-emerald-100 text-lg mt-2">Jest, Supertest y la Arquitectura Base</p>
            </div>
        </header>

        <!-- SECTION 1: EL TOOLKIT (Las Herramientas) -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <!-- Jest -->
            <div class="bg-white p-6 rounded-2xl shadow-md border-b-4 border-red-500 hover:-translate-y-1 transition duration-300">
                <div class="text-4xl mb-2">üÉè</div>
                <h3 class="font-bold text-slate-800">Jest</h3>
                <p class="text-xs text-slate-500 mt-1">El Juez. Ejecuta las pruebas y decide si pasan (PASS) o fallan (FAIL).</p>
            </div>
            <!-- Supertest -->
            <div class="bg-white p-6 rounded-2xl shadow-md border-b-4 border-purple-500 hover:-translate-y-1 transition duration-300">
                <div class="text-4xl mb-2">üïµÔ∏è‚Äç‚ôÇÔ∏è</div>
                <h3 class="font-bold text-slate-800">Supertest</h3>
                <p class="text-xs text-slate-500 mt-1">El Cliente Falso. Simula ser un navegador/Postman golpeando tu API.</p>
            </div>
            <!-- TypeScript -->
            <div class="bg-white p-6 rounded-2xl shadow-md border-b-4 border-blue-500 hover:-translate-y-1 transition duration-300">
                <div class="text-4xl mb-2">üìò</div>
                <h3 class="font-bold text-slate-800">TypeScript</h3>
                <p class="text-xs text-slate-500 mt-1">El Traductor. Nos da seguridad de tipos antes de ejecutar el c√≥digo.</p>
            </div>
            <!-- Express -->
            <div class="bg-white p-6 rounded-2xl shadow-md border-b-4 border-slate-500 hover:-translate-y-1 transition duration-300">
                <div class="text-4xl mb-2">üöÇ</div>
                <h3 class="font-bold text-slate-800">Express</h3>
                <p class="text-xs text-slate-500 mt-1">El Servidor. Recibe las peticiones HTTP y devuelve respuestas.</p>
            </div>
        </div>

        <!-- SECTION 2: ARQUITECTURA LIMPIA -->
        <div class="bg-slate-900 rounded-3xl p-8 text-white shadow-2xl">
            <h2 class="text-2xl font-bold mb-6 flex items-center">
                <span class="text-emerald-400 mr-2">üìÇ</span> Arquitectura de Carpetas
            </h2>
            
            <div class="flex flex-col md:flex-row gap-8 items-center justify-center">
                
                <!-- Diagrama Visual -->
                <div class="flex flex-col gap-2 w-full max-w-md">
                    <div class="flex items-center bg-slate-800 p-3 rounded-lg border border-slate-700">
                        <span class="text-2xl mr-3">üö¶</span>
                        <div>
                            <span class="font-bold text-emerald-400 block">src/routes/</span>
                            <span class="text-xs text-slate-400">Define URLs (GET /tareas). No piensa, solo dirige.</span>
                        </div>
                    </div>
                    <div class="flex justify-center text-slate-500">‚¨áÔ∏è</div>
                    <div class="flex items-center bg-slate-800 p-3 rounded-lg border border-slate-700">
                        <span class="text-2xl mr-3">üß†</span>
                        <div>
                            <span class="font-bold text-blue-400 block">src/controllers/</span>
                            <span class="text-xs text-slate-400">El cerebro. Procesa datos y responde JSON.</span>
                        </div>
                    </div>
                    <div class="flex justify-center text-slate-500">‚ö°</div>
                    <div class="flex items-center bg-slate-800 p-3 rounded-lg border border-slate-700">
                        <span class="text-2xl mr-3">üß™</span>
                        <div>
                            <span class="font-bold text-yellow-400 block">tests/</span>
                            <span class="text-xs text-slate-400">Vive afuera de src. Audita que el controlador funcione.</span>
                        </div>
                    </div>
                </div>

                <!-- Explicaci√≥n -->
                <div class="bg-slate-800/50 p-6 rounded-xl text-sm border-l-4 border-emerald-500">
                    <h4 class="font-bold text-white mb-2">¬øPor qu√© separar Rutas de Controladores?</h4>
                    <p class="text-slate-300 mb-2">
                        Si metes toda la l√≥gica en la ruta, creas "c√≥digo espagueti". 
                    </p>
                    <p class="text-slate-300">
                        Separarlos permite probar el controlador aisladamente y mantener el c√≥digo ordenado cuando la app crezca.
                    </p>
                </div>
            </div>
        </div>

        <!-- SECTION 3: ANATOM√çA DE UN TEST -->
        <div class="bg-white rounded-3xl shadow-lg overflow-hidden border border-slate-200">
            <div class="bg-indigo-600 p-4 text-white font-bold text-center uppercase tracking-widest">
                Anatom√≠a de una Prueba en Jest
            </div>
            
            <div class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                
                <!-- C√≥digo -->
                <div class="bg-slate-900 rounded-xl p-6 text-sm code-font shadow-inner overflow-x-auto text-slate-300">
<pre>
<span class="text-pink-400">describe</span>(<span class="text-yellow-300">"GET /tareas"</span>, () => {

  <span class="text-blue-400">it</span>(<span class="text-yellow-300">"Debe responder 200 OK"</span>, <span class="text-purple-400">async</span> () => {
    
    <span class="text-slate-500">// 1. Preparar / Actuar</span>
    <span class="text-purple-400">const</span> res = <span class="text-purple-400">await</span> request(app).get(<span class="text-yellow-300">"/tareas"</span>);

    <span class="text-slate-500">// 2. Afirmar (Assert)</span>
    <span class="text-green-400">expect</span>(res.status).<span class="text-blue-300">toBe</span>(200);
    <span class="text-green-400">expect</span>(res.body).<span class="text-blue-300">toHaveProperty</span>(<span class="text-yellow-300">"id"</span>);

  });

});
</pre>
                </div>

                <!-- Explicaci√≥n Visual -->
                <div class="space-y-4 text-sm">
                    <div class="flex items-start">
                        <div class="bg-pink-100 text-pink-600 font-bold px-2 py-1 rounded mr-3 code-font">describe()</div>
                        <p class="text-slate-600 pt-1">Es la carpeta o suite. Agrupa pruebas relacionadas (ej. todas las de GET).</p>
                    </div>
                    <div class="flex items-start">
                        <div class="bg-blue-100 text-blue-600 font-bold px-2 py-1 rounded mr-3 code-font">it() / test()</div>
                        <p class="text-slate-600 pt-1">Es la prueba individual. Debe describir una sola intenci√≥n clara.</p>
                    </div>
                    <div class="flex items-start">
                        <div class="bg-green-100 text-green-600 font-bold px-2 py-1 rounded mr-3 code-font">expect()</div>
                        <p class="text-slate-600 pt-1">La validaci√≥n. Si lo que est√° adentro no coincide con el <code>.toBe()</code>, la prueba falla.</p>
                    </div>
                    
                    <div class="mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg text-yellow-800 text-xs">
                        <strong>Tip Pro:</strong> Un buen test tiene 3 partes: 
                        1. <strong>Arrange</strong> (Preparar), 
                        2. <strong>Act</strong> (Ejecutar), 
                        3. <strong>Assert</strong> (Verificar).
                    </div>
                </div>

            </div>
        </div>

        <div class="text-center text-slate-400 text-xs pb-4">
            Ingenier√≠a de Software ‚Ä¢ Configuraci√≥n de Entorno
        </div>

    </div>

</body>
</html>